import { Section } from "./components/Section";

const tiers = [
  {
    title: "البنية الدور-مهمة-سياق",
    description:
      "ابدأ بدور واضح للنموذج، ثم عرف المهمة بدقة، وأضف سياقاً كافياً (بيانات، قيود، أمثلة) لتقليل التخمينات.",
    tags: ["Role", "Task", "Context"],
  },
  {
    title: "صيغة P.R.O.M.P.T",
    description:
      "Purpose، Result، Output، Mode، Persona، Tone: استخدمها كقائمة مراجعة لضمان تغطية جميع الأبعاد المؤثرة في النتيجة النهائية.",
    tags: ["Purpose", "Result", "Output", "Mode", "Persona", "Tone"],
  },
  {
    title: "البرومبت المتدرج",
    description:
      "قسّم المهمة المعقدة إلى مراحل (تحليل، توليد، تدقيق) وادمج مخرجات كل مرحلة كمدخل للمرحلة التالية.",
    tags: ["Decomposition", "Self-Review"],
  },
];

const qualityGuardrails = [
  {
    name: "تحديد الهدف",
    question: "ما المشكلة الدقيقة التي أحاول حلها؟ ما القيمة التجارية؟",
    signals: "وصف حالة الاستخدام، KPI أو مقياس مرتبط، تحديد الجمهور النهائي.",
  },
  {
    name: "مكافحة التحيز",
    question: "هل أقدم بيانات مرجعية متنوعة وأحدد نبرة محايدة؟",
    signals: "تنويع الأمثلة، ضبط أسلوب اللغة، منع الافتراضات الثقافية.",
  },
  {
    name: "التحقق",
    question: "كيف سأقيس جودة الإجابة وأتأكد من الاتساق؟",
    signals: "معايير تقييم (دقة، تغطية، أسلوب)، سيناريوهات اختبار سلبية، خطط مراقبة الإنتاج.",
  },
];

const evaluationMatrix = [
  {
    dimension: "الدقة الموضوعية",
    metrics: "Exact Match, F1, حقول مطلوبة",
    automation: "اختبارات وحدات للبرومبت باستخدام حزم OpenAI Eval أو langsmith",
  },
  {
    dimension: "الجودة السردية",
    metrics: "Likert Scoring، Rubric مخصص",
    automation: "تحكيم ذاتي (Self-Consistency) أو تصويت نموذج حكم خارجي",
  },
  {
    dimension: "الالتزام بالتنسيق",
    metrics: "مطابقة JSON Schema، قواعد Regex",
    automation: "اختبارات CI لضمان مطابقة البنية وروتين Sanitizer",
  },
  {
    dimension: "الزمنية والتكلفة",
    metrics: "زمن الاستجابة، التكلفة لكل استدعاء",
    automation: "لوحات مراقبة على Datadog/Snowflake + تنبيهات حدودية",
  },
];

export default function Page() {
  return (
    <main>
      <header style={{ marginBottom: "48px" }}>
        <span className="badge">دليل الشركات المتقدمة</span>
        <h1>
          استراتيجيات كتابة البرومبت لدى رواد الذكاء الاصطناعي للحصول على نتائج دقيقة
        </h1>
        <p>
          هذا الدليل يجمع أفضل الممارسات التشغيلية التي تعتمدها الشركات المؤسسية الرائدة
          في بناء أنظمة توليد النصوص. اتبع الخطوات لتطوير برومبت متماسك، قابل للتحسين، ومبني
          على اختبارات منهجية تضمن أعلى جودة للمخرجات.
        </p>
      </header>

      <Section title="خارطة الطريق المؤسسية" badge="01">
        <div className="grid two">
          <div className="card">
            <h3>1. الاستيعاب والتحليل</h3>
            <p>
              جمع أهم وثائق المنتج، معرفة الجمهور، فهم قيود الأعمال، وتحديد متطلبات الامتثال
              (قانونية، أمنية). يستخدم فريق البرمجة اللغوية نماذج تحليل مستندات لاستخراج المصطلحات
              الأساسية وسياقات العمل الحرجة.
            </p>
          </div>
          <div className="card">
            <h3>2. تصميم البرومبت الأساس</h3>
            <p>
              صياغة نسخة مرجعية تحتوي على: الدور، الهدف، خطوات التفكير المتوقعة، الأمثلة الإيجابية،
              وأنماط الاستجابة المرفوضة. يتم تخزينها في مستودع مركزي (Prompt Registry) مع نسخة
              متعقبة الإصدار.
            </p>
          </div>
          <div className="card">
            <h3>3. المعايرة والتوليد المتدرج</h3>
            <p>
              تشغيل أداة اختبار آلية (Prompt Sandbox) لتوليد عشرات المتغيرات مع ضبط المعلمات
              (temperature، top_p). يتم تقييم المخرجات وفق مسطرة معايير بشرية وآلية قبل اعتمادها.
            </p>
          </div>
          <div className="card">
            <h3>4. التحقق المستمر والحراسة</h3>
            <p>
              بعد النشر، يتم دمج مراقبة زمن حقيقي عبر سجل مخرجات مجهول الهوية، اكتشاف الشذوذ
              بالاعتماد على نماذج تصنيف ثانوية، وتحديث البرومبت تلقائياً بناءً على ملاحظات المستخدمين.
            </p>
          </div>
        </div>
      </Section>

      <Section title="قوالب البرومبت المفضلة" badge="02">
        <div className="grid two">
          {tiers.map((tier) => (
            <div key={tier.title} className="card">
              <h3>{tier.title}</h3>
              <p>{tier.description}</p>
              <div className="tag-list">
                {tier.tags.map((tag) => (
                  <span key={tag} className="tag">
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          ))}
        </div>
      </Section>

      <Section title="بروتوكول بناء البرومبت المتقن" badge="03">
        <ol>
          <li>
            <span className="highlight">صياغة الهدف التجاري:</span> اربط البرومبت بمؤشر أداء واضح
            (NPS، نسبة التحويل، معدل حل التذاكر) وحدد تأثير الإجابة المثالية.
          </li>
          <li>
            <span className="highlight">تحديد الدور والسياق:</span> اجعل النموذج يتبنى قطاعاً وخبرة
            محددة، واذكر مصادر المعرفة الموثوقة، وأضف شروطاً تمنع التخمين أو المؤشرات غير المؤكدة.
          </li>
          <li>
            <span className="highlight">تغذية الأمثلة المتنوعة:</span> اختر أمثلة تغطي الحالات الحرجة،
            الأخطاء الشائعة، واللهجات المختلفة إن وجدت، وحدد لماذا المثال ممتاز أو مرفوض.
          </li>
          <li>
            <span className="highlight">تعليمات التحقق الذاتي:</span> أضف خطوة صريحة تطلب من النموذج
            مراجعة ناتجه مقابل قائمة تدقيق، مع تحديد صيغة الرفض إذا لم تتحقق الشروط.
          </li>
          <li>
            <span className="highlight">تضمين القيود التنفيذية:</span> حدد الحد الأقصى للكلمات، شكل
            البيانات النهائي (جدول، JSON، Markdown)، واحمِ السرية بعدم إعادة طرح بيانات حساسة.
          </li>
        </ol>
      </Section>

      <Section title="حواجز الجودة ومكافحة المخاطر" badge="04">
        <table className="table">
          <thead>
            <tr>
              <th>المبدأ</th>
              <th>سؤال الفحص</th>
              <th>أدلة الالتزام</th>
            </tr>
          </thead>
          <tbody>
            {qualityGuardrails.map((item) => (
              <tr key={item.name}>
                <td>{item.name}</td>
                <td>{item.question}</td>
                <td>{item.signals}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </Section>

      <Section title="اختبار وتقييم البرومبت" badge="05">
        <p>
          الشركات المتقدمة تعتمد مزيجاً من التقييم البشري والآلي. يتم إنشاء مجموعة سيناريوهات تغطي
          الحالات المثالية، حواف التوقعات، وأخطاء المستخدم. تُدمج هذه السيناريوهات في خط CI/CD لضمان
          عدم تدهور الأداء مع كل تعديل جديد.
        </p>
        <table className="table">
          <thead>
            <tr>
              <th>البعد</th>
              <th>أمثلة مقاييس</th>
              <th>أتمتة مقترحة</th>
            </tr>
          </thead>
          <tbody>
            {evaluationMatrix.map((row) => (
              <tr key={row.dimension}>
                <td>{row.dimension}</td>
                <td>{row.metrics}</td>
                <td>{row.automation}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </Section>

      <Section title="تشغيل البرومبت على نطاق مؤسسي" badge="06">
        <div className="grid two">
          <div className="card">
            <h3>حاكمية البرومبت (PromptOps)</h3>
            <p>
              استخدم مستودعاً مركزياً مع سجل مراجعات، وفرض مراجعة ثنائية (Product + Legal) لأي تغيير.
              اربط كل برومبت بتذاكر Jira وتعليمات التشغيل الآمن.
            </p>
          </div>
          <div className="card">
            <h3>المراقبة بعد الإطلاق</h3>
            <p>
              اجمع سجلات تفاعلات مجهولة الهوية، استخرج إشارات السخط، وفعّل تنبيهات في حال تجاوز
              معدلات الفشل أو استخدام كلمات ممنوعة. طبّق اختبارات ظل shadow deployment قبل التوسّع.
            </p>
          </div>
          <div className="card">
            <h3>النشر المتدرج</h3>
            <p>
              جرّب البرومبت مع شرائح مستخدمين صغيرة (1-5%)، ثم وسّع تدريجياً بناءً على تحسن المقاييس.
              احتفظ بإصدار fallback مستقر للرجوع في حال ظهور سلوك غير مرغوب.
            </p>
          </div>
          <div className="card">
            <h3>التعلم التنظيمي</h3>
            <p>
              ابنِ برنامجاً داخلياً لتوثيق الدروس المستفادة، وتدريب فرق دعم العملاء والمبيعات على كيفية
              قراءة وتعديل البرومبت ضمن سياسات الحوكمة.
            </p>
          </div>
        </div>
      </Section>

      <Section title="قائمة مراجعة قبل إطلاق البرومبت" badge="07">
        <ul>
          <li>تمت مراجعة النصوص من قبل خبير المجال وموظف امتثال.</li>
          <li>تغطي مجموعة الاختبار حالات النجاح والإخفاق وتدعم اللغات/اللهجات المطلوبة.</li>
          <li>أُدرجت تعليمات الرفض الصريح لأي سؤال خارج نطاق الاستخدام.</li>
          <li>يتم تسجيل المقاييس تلقائياً ويمكن تتبع أثر أي تغيير على KPI مستهدف.</li>
          <li>موجود نظام مراقبة لحماية البيانات الحساسة والتأكد من الامتثال للسياسات.</li>
        </ul>
      </Section>

      <footer className="footer">
        <span>
          بُني هذا الدليل استناداً إلى ممارسات شركات الذكاء الاصطناعي الرائدة في العالم ومناهج
          PromptOps المتقدمة.
        </span>
        <span>
          تحديث: {new Date().getFullYear()} · يمكن مواءمة المحتوى مع سياسات مؤسستك الداخلية.
        </span>
      </footer>
    </main>
  );
}
